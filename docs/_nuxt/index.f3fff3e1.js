import{_ as M}from"./Spinner.9ccdeb3d.js";import{_ as V}from"./svg-img.c84b5052.js";import{_ as P}from"./Links.5a837d86.js";import{_ as j}from"./imgSrc.6c5d94f1.js";import{d as C,u as q,i as F,l as H,m as O,n as Q,o as r,c as m,a,F as N,r as k,t as d,q as G,v as J,g as i,s as S,h as g,w as D,x as $,b as w,e as K,p as U,f as W,_ as X,k as Y}from"./entry.333d4a1c.js";import{u as Z}from"./composables.8128985c.js";import{u as tt}from"./site.0140fde5.js";import{u as et,a as st,b as at}from"./queries.db9c3da7.js";const nt=n=>(U("data-v-04cb155e"),n=n(),W(),n),ot={class:"apt-details"},it={class:"plans image-container columns"},rt=nt(()=>a("div",{class:"spacer"},null,-1)),lt={class:"apt-name"},ct={class:"apt-description"},ut={class:"image-container columns images"},dt={class:"caption"},pt=C({__name:"AptDetails",props:{flat:{type:Object,default:{}}},setup(n){var x;const{flat:t}=n,{locale:o,t:p}=q(),{params:l,path:_,fullPath:h}=F(),{getCanonical:c,getSiteData:b}=tt();let u=H(!1);const v=O(()=>t.flatlist.filter(e=>!e.taken&&e.flatNumber!==t.flatNumber));Q(()=>{document.body.addEventListener("click",()=>{u.value&&(u.value=!1)})});const R=e=>(t==null?void 0:t.flatNumber)===e?"hidden":"",I=e=>{e.preventDefault(),e.stopPropagation(),u.value=!u.value},A=e=>{if(typeof t<"u")switch(o.value){case"de":return t[e+"DE"];default:return typeof t[e+"EN"]<"u"?t[e+"EN"]:t[e+"DE"]}return""},B=()=>{if(typeof t<"u")switch(o.value){case"de":return t.titleDE;default:return typeof t.titleEN<"u"?t.titleEN:t.titleDE}return""},T=e=>{switch(o.value){case"de":return e.title;default:return typeof e.titleEN<"u"?e.titleEN:e.title}};return Z({title:o.value==="de"?t==null?void 0:t.titleDE:t==null?void 0:t.titleEN,titleTemplate:e=>{var y,f;return`${e} | ${o.value==="de"?(y=t.asset)==null?void 0:y.nameDE:(f=t.asset)==null?void 0:f.nameEN} | ${b.description}`},meta:[{hid:"og:title",property:"og:title",content:o.value==="de"?t.title:t==null?void 0:t.titleEN},{hid:"og:type",property:"og:type",content:"article"},{hid:"og:url",property:"og:url",content:c+h},{hid:"og:image",property:"og:image",content:`${(x=t.images[0])==null?void 0:x.url}?w=1200&h=1200&fit=max&auto=format`},{hid:"og:description",property:"og:description",content:o.value==="de"?t.descriptionDE.slice(0,200).trim():t.descriptionEN.slice(0,200).trim()},{hid:"description",property:"description",content:o.value==="de"?t.descriptionDE.slice(0,200).trim():t.descriptionEN.slice(0,200).trim()}],link:[{rel:"canonical",href:c+_}]}),(e,y)=>{const f=V,E=P,z=j;return r(),m("div",ot,[a("div",it,[(r(!0),m(N,null,k(n.flat.plans,s=>(r(),g(E,{class:"link",key:s.url,to:{name:"assets-asset-flat-plans",hash:`#${s.slug.current}`,params:{asset:i(l).asset,flat:i(l).flat}}},{default:D(()=>[a("div",{class:"plan-wrapper",style:$({aspectRatio:s.dimensions.aspectRatio.toString()})},[w(f,{src:s.url,alt:s.title,dimensions:s.dimensions,styl:{aspectRatio:s.dimensions.aspectRatio.toString()},class:"drop-darken"},null,8,["src","alt","dimensions","styl"])],4)]),_:2},1032,["to"]))),128))]),rt,a("div",{class:"flat-number",onClick:I},[a("span",null,d(n.flat.flatNumber),1),G(a("div",{class:"taken"},d(i(p)("taken")),513),[[J,n.flat.taken]]),a("div",{class:S(["drop-down",i(u)?"show":"hide"])},[(r(!0),m(N,null,k(i(v),s=>(r(),m("div",{class:S(["flat",R(s.flatNumber)]),key:s.flatNumber},[w(E,{to:{name:"assets-asset-flat",params:{asset:i(l).asset,flat:s.slug}}},{default:D(()=>[K(d(s.flatNumber),1)]),_:2},1032,["to"])],2))),128))],2)]),a("h1",lt,d(B()),1),a("div",ct,d(A("description")),1),a("div",ut,[(r(!0),m(N,null,k(n.flat.images,(s,L)=>(r(),g(E,{to:{name:"assets-asset-flat-images",hash:`#${s.slug.current}`,params:{asset:i(l).asset,flat:i(l).flat}},class:"link",key:L},{default:D(()=>[a("div",{class:"image-wrapper",style:$({aspectRatio:s.dimensions.aspectRatio.toString()})},[w(z,{width:800,dimensions:s.dimensions,copyright:s.author,fit:"inside",loading:!0,src:s.url,alt:s.title},null,8,["dimensions","copyright","src","alt"]),a("div",dt,d(T(s)),1)],4)]),_:2},1032,["to"]))),128))])])}}});const mt=X(pt,[["__scopeId","data-v-04cb155e"]]),kt=C({__name:"index",setup(n){const{params:t}=F(),{fetch:o}=et();let p={plans:[],images:[]};const{data:l,error:_,pending:h}=st(`${t.asset}-${t.flat}-details`,()=>o(at,{asset:t.asset,flat:t.flat}),{lazy:!0,transform:c=>(p=c.flat,p.asset={nameDE:c.nameDE,nameEN:c.nameEN},p)});if(_.value)throw console.error("flat not found",_),Y({statusCode:404,statusMessage:"Flat Not Found"});return(c,b)=>{const u=M,v=mt;return i(h)?(r(),g(u,{key:0})):(r(),g(v,{key:1,flat:i(l)},null,8,["flat"]))}}});export{kt as default};
